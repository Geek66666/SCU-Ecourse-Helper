# SCU-Ecourse-Helper（给个小星星吧）

#### 介绍

大川学堂快速水课小工具 V2.1 慢速防挂版

#### 使用方法

- 打开你要水的课，F12然后打开控制台
- 然后粘贴“核心代码”并回车
- 播放视频后点击暂停，系统将自动抓取参数
- 等待程序自动运行并退出，当收到“检测到成功更新状态，终止所有程序...”时可退出网页

#### 使用说明

- 本版本适用于服务器后端对访问频率做出限制，相比快速版速度更慢但不报错，如有需要请自行修改频率

#### 实现原理

尝试直接通过修改learnStatus = 2来实现标记课程学习完毕

实践时发现在学习时长不足的情况下无法直接完成课程，这也就是为什么拖动进度条和使用变速插件倍速播放不起作用

抓包得到，大川学堂通过POST https://ecourse.scu.edu.cn/learn/v1/statistics/course/learntime 来上传学习时间

```
"courseId": capturedParams.courseId,   // 课程id
"timeInterval": 6000,     // 上传的本次学习时间
"courseType": 1,      // 无关变量
"resourceId": capturedParams.resourceId,  // 视频id
"courseSemester": 1   // 无关变量
```

由于本人才疏学浅，未能找到视频id的来源，故采用抓取正常POST内容来获取courseId和resourceId

经观察，视频暂停时会触发POST请求

完善代码，搞完收工

#### 历史版本
```
V1.0 采用两段控制台代码手动执行（后因过于复杂舍弃）
V2.0 修改重构代码使得所有功能自动执行
V2.1 被服务器后端发现异常，两次请求过短会报错400：请求过于频繁；故修改时间间隔和请求频率，并对AI写的代码添加注释
```